<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Basics of Easing Animations in android</title>
  <meta name="description" content="How did I do
" />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <link rel="canonical" href="http://shrikanthkr.github.io/android/2015/11/12/easing-animations-android.html">

  <link rel="shortcut icon" href="/assets/images/favicon.ico">
<!--  <link rel="stylesheet" href=""> -->
  <link rel="stylesheet" href="http://brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i">
  <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" >

  <link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" />
  <link rel="stylesheet" type="text/css" media="print" href="/css/print.css" />
  <link rel="stylesheet" type="text/css"  href="/css/prism.css" />
  <script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>

  <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
  <script type="text/javascript" src="/assets/js/index.js"></script>
  <script type="text/javascript" src="/assets/js/readingTime.min.js"></script>
  <script type="text/javascript" src="/assets/js/prism.js"></script>
</head>

  <body itemscope itemtype="http://schema.org/Article">
    <!-- header start -->

<a href="http://shrikanthkr.github.io" class="logo-readium"><span class="logo" style="background-image: url(/assets/images/logo.jpg)"></span></a>

<!-- header end -->

    <main class="content" role="main">
      <article class="post">
        
        <div class="article-image">
          <div class="post-image-image" style="background-image: url(/assets/article_images/easing-animations-android/bg.gif)">
            Article Image
          </div>
          <div class="post-meta">
            <h1 class="post-title">Basics of Easing Animations in android</h1>
            <div class="cf post-meta-text">
              <div class="author-image" style="background-image: url(/assets/images/author.jpg)">Blog Logo</div>
              <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person">Shrikanth</h4>
              on
              <time datetime="2015-11-12 14:34">12 Nov 2015</time>
              <!-- , tagged on <span class="post-tag-">, <a href="/tag/"></a></span> -->
            </div>
            <div style="text-align:center">
              <a href="#topofpage" class="topofpage"><i class="fa fa-angle-down"></i></a>
            </div>
          </div>
        </div>
        <script>
          (function ($) {
              "use strict";
              $(document).ready(function(){
                  var $window = $(window),
                      $image = $('.post-image-image');
                  $window.on('scroll', function() {
                      var top = $window.scrollTop();

                      if (top < 0 || top > 1500) { return; }
                      $image
                          .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
                          .css('opacity', 1-Math.max(top/700, 0));
                  });
                  $window.trigger('scroll');

                  var height = $('.article-image').height();
                      $('.post-content').css('padding-top', height + 'px');

                  $(function() {
                    $('a[href*=#]:not([href=#])').click(function() {
                      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
                        var target = $(this.hash);
                        target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
                        if (target.length) {
                          $('html,body').animate({
                            scrollTop: target.offset().top
                          }, 500);
                          return false;
                        }
                      }
                    });
                  });

              });

          }(jQuery));
        </script>
        
        <section class="post-content">
          <div class="post-reading">
            <span class="post-reading-time"></span> read
          </div>
          <a name="topofpage"></a>
          <p>An easing function describes the value of a property given a percentage of completeness. Thanks to <a href="https://www.linkedin.com/in/robertpenner">Robert Penner</a> for defining equations which drove animations with ease. </p>

<hr>

<p>How do we do this android ? First lets see how we do animations with ValueAnimator.</p>

<h4>Setting up Activity</h4>

<blockquote>
<p>app/package.name/MainActivity.java
<div>
  <pre data-line=''><code class='language-javascript'>Button click;
View view;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
    view = (View)findViewById(R.id.view);
    click = (Button)findViewById(R.id.button);
    click.setOnClickListener(clickListener);
}
View.OnClickListener clickListener = new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        ease();<br>
    }
};</code></pre>
</div></p>
</blockquote>

<p>Our XML layout</p>

<div>
  <pre data-line=''><code class='language-markup'>&lt;View
    android:id=&quot;@+id/view&quot;
    android:layout_width=&quot;80dp&quot;
    android:layout_height=&quot;80dp&quot;
    android:background=&quot;@android:color/holo_blue_bright&quot;/&gt;
&lt;Button
    android:id=&quot;@+id/button&quot;
    android:text=&quot;Click&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_alignParentBottom=&quot;true&quot;
    android:layout_height=&quot;60dp&quot;/&gt;</code></pre>
</div>

<hr>

<h4>Setup simple Animation</h4>

<p><a href="http://developer.android.com/reference/android/animation/ValueAnimator.html">ValueAnimator</a> class provides a simple timing engine for running animations which calculate animated values and set them on target objects .
<a href="http://developer.android.com/reference/android/animation/AnimatorSet.html">AnimatorSet</a> class plays a set of Animator objects in the specified order. Animations can be set up to play together, in sequence, or after a specified delay.</p>

<p>We will be using these two classes to make our first animation.</p>

<blockquote>
<p>app/package.name/MainActivity.java</p>
</blockquote>

<div>
  <pre data-line=''><code class='language-javascript'>private void ease() {
    AnimatorSet animatorSet = new AnimatorSet();
    ValueAnimator valueAnimatorX = ValueAnimator.ofFloat(fromX,toX, fromX);
    valueAnimatorX.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
        @Override
        public void onAnimationUpdate(ValueAnimator animation) {
            view.setTranslationX((float) animation.getAnimatedValue());
        }
    });
    animatorSet.playTogether(valueAnimatorX);
    animatorSet.setDuration(1500);
    animatorSet.start();
}</code></pre>
</div>

<p><center> <img src="/assets/article_images/easing-animations-android/linear.gif" alt="Linear Animation"></center></p>

<p>This animations seems so boring. We need somthing cool.</p>

<hr>

<h4>Easing to make it awesome</h4>

<p><a href="http://developer.android.com/reference/android/animation/ValueAnimator.html">ValueAnimator</a> class accepts an evaluator, which defines on how the value is derived. So we make use of <code>setEvaluator</code> function and put our easing equations there to get the desired animation.</p>

<p>So make a class <code>Easing</code> implementing TypeEvaluator</p>

<blockquote>
<p>app/package.name/Easing.java</p>
</blockquote>

<div>
  <pre data-line=''><code class='language-javascript'>public class Easing implements TypeEvaluator&lt;Number&gt; {
    @Override
    public Number evaluate(float fraction, Number startValue, Number endValue) {
    }
}</code></pre>
</div>

<p>Now we have the evaluate methods which tell the <code>ValueAnimator</code> on how it should evaluate.</p>

<blockquote>
<p>app/package.name/Easing.java</p>
</blockquote>

<p>/**   <br>
* Converts params to calculate easing values<br>
* @param fraction<br>
* @param startValue<br>
* @param endValue<br>
* @return<br>
*/<br></p>

<div>
  <pre data-line=''><code class='language-javascript'>@Override
public Number evaluate(float fraction, Number startValue, Number endValue) {
    float t = duration * fraction;
    float b = startValue.floatValue();
    float c = endValue.floatValue() - startValue.floatValue();
    float d = duration;
    float result = calculate(t,b,c,d);
    return result;

}</code></pre>
</div>

<p>What&#39;s the calculate method here? 
This method decides which easing equation we are going to use. There is a lot mentioned about equations <a href="http://gizma.com/easing/">here</a>. You can edit this method based on any of the equations given and get your desired animation.</p>

<blockquote>
<p>app/package.name/Easing.java</p>
</blockquote>

<p>/**<br>
*<br>
* @param t - Current Time<br>
* @param b - Start Value<br>
* @param c - Change in value<br>
* @param d - Duration<br>
* @return value calculated for cubic ease-in-out<br>
*/<br></p>

<div>
  <pre data-line=''><code class='language-javascript'>public float calculate(float t, float b, float c, float d){
    t /= d/2;
    if (t &lt; 1) {
        return c/2*t*t*t + b;
    }
    t -= 2;
    return c/2*(t*t*t + 2) + b;
}</code></pre>
</div>

<hr>

<h4>Update MainAcvitity</h4>

<p>Now we are good with the <code>Easing</code> class and ready to include it in our <code>ValueAnimator</code>.</p>

<blockquote>
<p>app/package.name/MainActvity.java</p>
</blockquote>

<div>
  <pre data-line=''><code class='language-javascript'>private void ease() {
    Easing easing = new Easing(1500);
    ...
    valueAnimatorX.setEvaluator(easing);
    valueAnimatorX.addUpdateListener(...)
    ...
}</code></pre>
</div>

<p>Uh! is that enough ? 
<table>
    <tr>
    <td>
        <center> <img src="/assets/article_images/easing-animations-android/linear.gif" alt="Linear Animation"></center>
    </td>
    <td>
        <center> <img src="/assets/article_images/easing-animations-android/ease.gif" alt="Easing Animation"></center>
    </td>
    </tr>
</table></p>

<hr>

<p>Find the source code of the entire sample over here, <a href="https://github.com/shrikanthkr/SimpleEasingAndroid">Easing on Android</a>.</p>

<p><a href="https://github.com/daimajia/AnimationEasingFunctions">AnimationEasingFunctions</a> seems an awesome library to make easing animatons easier and lively.</p>

        </section>
        <footer class="post-footer">
          <section class="share">
            
              
                <a class="icon-twitter" href="http://twitter.com/share?text=Basics+of+Easing+Animations+in+android&amp;url=http://shrikanthkr.github.io/android/2015/11/12/easing-animations-android"
                  onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
                <i class="fa fa-twitter"></i><span class="hidden">twitter</span>
                </a>
              
            
              
            
          </section>
        </footer>
        <div class="bottom-teaser cf">
          <div class="isLeft">
            <h5 class="index-headline featured"><span>Written by</span></h5>
            <section class="author">
              <div class="author-image" style="background-image: url(/assets/images/author.jpg)">Blog Logo</div>
              <h4>Shrikanth</h4>
              <p class="bio"></p>
              <hr>
              <p class="published">Published <time datetime="2015-11-12 14:34">12 Nov 2015</time></p>
            </section>
          </div>
          
          <div class="isRight">
            <h5 class="index-headline featured"><span>Supported by</span></h5>
            <footer class="site-footer">
              <section class="poweredby">Proudly published with <a href="http://jekyllrb.com"> Jekyll</a></section>
              <a class="subscribe" href="/feed.xml"> <span class="tooltip"> <i class="fa fa-rss"></i> You should subscribe to my feed.</span></a>
              <div class="inner">
                <section class="copyright">All content copyright <a href="/">Shrikanth</a> &copy; 2014<br>All rights reserved.</section>
              </div>
            </footer>
          </div>
        </div>
      </article>
    </main>
    <div class="bottom-closer">
      <div class="background-closer-image"  style="background-image: url(/assets/images/background.jpg)">
      Image
    </div>
    <div class="inner">
      <h1 class="blog-title">Blog</h1>
      <h2 class="blog-description">How did I do
</h2>
      <a href="/" class="btn">Back to Overview</a>
    </div>
    </div>
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51329112-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments)};
  gtag('js', new Date());

  gtag('config', 'UA-51329112-3');
</script>

  </body>
</html>
